## MySQL的基本架构
![MySQL 的逻辑架构图](90AFCEA4-2016-4621-9340-37305D9DD2C2.webp.md)

MySQL 可以分为 Server 层和存储引擎层两部分。
- Server 层包括连接器、查询缓存、分析器、优化器、执行器等，涵盖 MySQL 的大多数核心服务功能，引擎的功能都在这一层实现，比如存储过程、触发器、视图等。
- 而存储引擎层负责数据的存储和提取。其架构模式是插件式的，支持 InnoDB、MyISAM、Memory 等多个存储引擎。

## 一条查询语句的执行过程
```Sql 
mysql> select * from T where ID=10；
```
### [连接器](连接器.md)
第一步，你会先连接到这个数据库上，这时候接待你的就是连接器。
### [查询缓存](查询缓存.md)
连接建立完成后，你就可以执行 select 语句了。执行逻辑就会来到第二步：查询缓存。

MySQL 拿到一个查询请求后，会先到查询缓存看看，之前是不是执行过这条语句。之前执行过的语句及其结果可能会以 key-value 对的形式，被直接缓存在内存中。key 是查询的语句，value 是查询的结果。如果你的查询能够直接在这个缓存中找到 key，那么这个 value 就会被直接返回给客户端。
> *MySQL 8.0 版本直接将查询缓存的整块功能删掉了，*

### [分析器](分析器.md)

1. 词法分析
2. 语法分析


### [优化器](优化器.md)
优化器是在表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序。

### [执行器](执行器.md)
MySQL 通过分析器知道了你要做什么，通过优化器知道了该怎么做，于是就进入了执行器阶段，开始执行语句。
开始执行的时候，要先判断一下你对这个表 T 有没有执行查询的权限，如果没有，就会返回没有权限的错误
如果有权限，就打开表继续执行。打开表的时候，执行器就会根据表的引擎定义，去使用这个引擎提供的接口。